<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart Demo</title>
</head>
<body>

<h1>Shopping Cart</h1>

<div id="cart-container"></div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    fetchCartData();
  });

  function fetchCartData() {
    // Địa chỉ URL API để lấy dữ liệu giỏ hàng từ backend
    const cartEndpoint = 'http://localhost:8080/api/carts';

    // Gửi yêu cầu GET đến API để lấy thông tin giỏ hàng
    axios.get(cartEndpoint)
            .then(response => {
              // Xử lý dữ liệu giỏ hàng và cập nhật giao diện người dùng
              const cartItems = response.data;
              updateCartUI(cartItems);
            })
            .catch(error => {
              console.error('Error fetching cart data:', error);
              alert('Error fetching cart data. Please try again.');
            });
  }

  function updateCartUI(cartItems) {
    const cartContainer = document.getElementById('cart-container');

    // Xóa nội dung hiện tại của giỏ hàng
    cartContainer.innerHTML = '';

    // Lặp qua các sản phẩm trong giỏ hàng và hiển thị chúng
    cartItems.forEach(item => {
      const cartItemElement = document.createElement('div');
      cartItemElement.innerHTML = `<p>${item.product.title} - Quantity: ${item.quantity}</p>`;
      cartContainer.appendChild(cartItemElement);
    });
  }

</script>
</body>
</html>
